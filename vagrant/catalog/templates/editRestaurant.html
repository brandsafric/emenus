{% extends "main.html" %}
{% block content %}
    {% include "header.html" %}
    <div class="form-wrapper">
        <div class="ih-item circle colored effect5 form_image">
            <a data-toggle="modal" data-target="#restModal">
                <div class="img">
                    <img id="rest_img" src="{{ url_for('static', filename=r_picture.path) }}" alt="img">
                </div>
                <div class="info" id="form-circle">
                    <div class="info-back info-bg">
                        <h3>Change Picture</h3>
                        <p>View your image gallery</p>
                    </div>
                </div>
            </a>
        </div>
        <!-- end colored -->
        <div class="form-heading form-heading-nr">
            <h1>Edit Restaurant</h1>
        </div>
        <form id="editRestForm" action="{{ url_for('edit_restaurant', restaurant_id=restaurant_id) }}" method="post"
              enctype="multipart/form-data">
            <label>Name <span class="required">*</span></label>
            <div>
                <input type="text" size="80" name="name" value={{ restaurant.name }} required>
            </div>
            <div>
                <input id="target" type="text" name="picture" value={{ r_picture.id }}>
            </div>
            <a class="cancel btn btn-secondary" id="btn-cancel"
               href="{{ url_for('show_menu', restaurant_id=restaurant_id) }}">Cancel</a>
            <input class="btn btn-primary" type="submit" value="Save">
            <a class="delete btn btn-danger" href="{{ url_for('delete_restaurant', restaurant_id=restaurant_id) }}">Delete</a>
        </form>
    </div>


    <!-- Modal -->
    <div class="modal fade " id="restModal" tabindex="-1" role="dialog" aria-labelledby="restModalLabel"
         aria-hidden="true">
        <div class="modal-dialog " role="document">
            <div class="modal-content gallery">
                <div class="modal-header">
                    <h5 class="modal-title" id="restModalLabel">Image Gallery</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <span>Choose an Image</span>
                    <span class="warning">(Max 5 images)</span>
                    <ul class="img_gallery">
                        {% if r_picture.id == 1 %}
                            <li class="img_thumbnail selected" id="img_thumbnail_1" data-index="1">
                                {% else %}
                            <li class="img_thumbnail" id="img_thumbnail_1">
                        {% endif %}
                        <img class="img_tn" id="img_tn_1" data-index="1" data-imgpath="{{ default_img.path }}"
                             src="{{ url_for('static', filename='img/not-available-abbreviation-inside-a-circle_318-33662.jpg') }}"
                             alt="img">
                        </li>
                        {% for p in user_pics %}
                            {% if r_picture.id == p.id %}
                                <li class="img_thumbnail selected" id="img_thumbnail_{{ p.id }}"
                                    data-index="{{ p.id }}">
                                    {% else %}
                                <li class="img_thumbnail" id="img_thumbnail_{{ p.id }}" data-index="{{ p.id }}">
                            {% endif %}
                        <img id="img_tn_{{ p.id }}" class="img_tn" data-index="{{ p.id }}" data-fn="{{ p.filename }}"
                             data-imgpath="{{ p.path }}" src="{{ url_for('static', filename=p.path) }}" alt="img">
                        </li>
                        {% endfor %}
                    </ul>
                    <div class="image_container">
                        {% for p in user_pics %}
                            <div class="icons_delete" id="icons_delete_{{ p.id }}" data-index="{{ p.id }}">
                                {% if r_picture.id == p.id %}
                                    <i id="i_delete_{{ p.id }}" data-index="{{ p.id }}" data-fn="{{ p.filename }}"
                                       data-tn="img_thumbnail_{{ p.id }}" data-parent="icons_delete_{{ p.id }}"
                                       class="fa fa-times-circle i_delete icon_show" aria-hidden="true"></i>
                                {% else %}
                                    <i id="i_delete_{{ p.id }}" data-index="{{ p.id }}" data-fn="{{ p.filename }}"
                                       data-tn="img_thumbnail_{{ p.id }}" data-parent="icons_delete_{{ p.id }}"
                                       class="fa fa-times-circle i_delete" aria-hidden="true"></i>
                                {% endif %}
                            </div>
                        {% endfor %}
                    </div>
                    <div class="file_container">
                    <span class="btn btn-default">
                        <input type="file" id="upload" name="image"/>
                    </span>
                    </div>
                    <div class="no_upload">Please remove a picture to free up space.</div>
                </div>
                <div class="modal-footer gallery">
                    <button id="btn-set" type="button" class="btn btn-primary btn-set" data-dismiss="modal">Set</button>
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>

{% endblock %}